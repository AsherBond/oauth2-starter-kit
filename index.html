<html>
  <head>
    <title>meetup oauth2 starter</title>
    <link rel="stylesheet" href="mu.css"/>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="mu.api.js"></script>
    <script type="text/javascript">
      api = mu.Api({
          clientId: "97271o4gabbrq7efdchn7fienh"
          , onMember: function(member, token) {
              $("#connect").hide(); $("#disconnect").show();
              $.getJSON("https://api.meetup.com/2/groups?access_token=" + token + "&member_id=self&callback=?", function(grps) {
                  var el = $("#groups"), buff = [];
                  $.map(grps.results, function(g) {
                      buff.push('<li>' + g.name.link(g.link) + '</li>');
                  });
                  el.append(buff.join(''));
              });
              $("#member").html("<img class='avatar' src=" + member.photo.thumb_link + " /> Hey " + member.name.link(member.link) + ".");
          }
      });
      
      (function($){
          $(function() {
              $("#connect").click(function(e) {
                  e.preventDefault();
                  api.login();
                  return false;
              });
              $("#disconnect").hide().click(function(e){
                  e.preventDefault();
                  api.logout(function(){
                      $("#disconnect").hide(); $("#connect").show();
                  });
                  return false;
              });
          });
      })(jQuery);
      </script>
  </head>
  <body>
    <div id="container">
      <h1>Meetup oauth2 js starter kit</h1>
      <a id="connect" href="#">Connect with Meetup</a> <a id="disconnect" href="#">Disconnect</a>
      <div id="member"></div>
      <ul id="groups"></ul>
    </div>
  </body>
</html>